////////////////////////////////////////////////////////////////////////////deploy to tomcat/////////////////////////////////////////////////////////////////////////////////////
node {
// Get Artifactory server instance, defined in the Artifactory Plugin administration page.
    def server = Artifactory.server "jfrog-server"
    def buildInfo = Artifactory.newBuildInfo() 


// Project Dir
    def project_path = "Download"





dir(project_path){


stage('Build Managment') {
      def downloadSpec = """{
     "files": [
    {
    "pattern": "devops_301/*.war",
    "target": "files/"
        }
    ]
    }"""
    server.download spec: downloadSpec
 }
 


stage('Deployment - Stage'){
  deploy adapters: [tomcat8(credentialsId: 'tomcat01', path: '', url: 'http://fomop41962dns.eastus2.cloudapp.azure.com:8080/')], contextPath: 'petclinic', war: 'files/petclinic.war'
    }
  }
}

 







